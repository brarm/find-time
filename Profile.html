<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" 
    />
    <link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/stylesheets/css/profile.css" />

    <title> Profile Page</title>
    Profile Page <br><br>
</head>
<body>

<!-- Fixed navbar -->
    <div>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Find Time</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">Home</a></li>
            <li><a href="/logout">Logout</a></li>
            <li><a href="/recurring">Edit Recurring</a></li>
            <li>
              <form class="navbar-form form-inline pull-right" action="/search" method="get">
                  <input type="text" class="span2" placeholder="Search">
                  <input type="submit" value="Search" class="btn"/>
              </form>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    </div>

    

    <script type="text/javascript">
      function parse_cal() {

      }
    </script>

    <script>
    function test_func(data) {
      console.log(data);
    }

    $(document).ready(function(){
      var disp = document.getElementsByClassName('container')[1];
      var grid = document.createElement('table');
      grid.className = 'calendar';
      disp.appendChild(grid);

      var user_cal = "{{ calendar|safe }}"

      var daily_events = " {{ calendar.daily_events['friday']|safe }}"
      console.log(user_cal)
      console.log(daily_events)
      console.log(session['calendar'])

      console.log("fucking shit")
      // test_func({{ calendar|safe }})
      
      // header row
      var col_headers = ['Time','M','T','W','Th','F','Sa','Su'];

      // <thead>
      //     <tr>
      //         <th>&nbsp;</th>
      //         <th width="20%">Sunday</th>
      //         <th width="20%">Monday</th>
      //         <th width="20%">Tuesday</th>
      //         <th width="20%">Wednesday</th>
      //         <th width="20%">Thursday</th>
      //     </tr>
      // </thead>

      var head = document.createElement('thead');
      var row = document.createElement('tr');

      $.each(col_headers, function( index, value ) {
        var th = row.appendChild(document.createElement('th'));
        $(th).text(value);
      })

      head.appendChild(row);
      grid.appendChild(head);


      
      // $(row).prepend(head)
      // $(grid).prepend(row);
    })
    </script>

    <!--
    <div id="calendargoeshere"></div>
    <div id="subcalendarcontainer">
        <div id="detailsgohere"></div>
        <div id="feedgoeshere"></div>
    </div>-->
    

    <!--
    <div>

    
    <div class="jumbotron">
      <div class="container" id="calendar-container">-->
      <!-- generate calendar -->
      <!--   <script>

          var x = document.getElementsByClassName('panel')[0];
          var grid = document.createElement('table');
          grid.className = 'grid';
            x.appendChild(grid);
            var day_letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
            var col_headers = ['Time','M','T','W','Th','F','Sa','Su'];
            var hour = 12;

            for(var x=0; x<49; x++) {
              var tr = grid.appendChild(document.createElement('tr'));

              if(x == 0) {
                $.each(col_headers, function( index, value ) {
                  var th = tr.appendChild(document.createElement('th'));
                  $(th).text(value)
                })
              }
              else {
                for(var y=0; y<7; y++) {
                  if(y == 0) {
                    var th = tr.appendChild(document.createElement('th'));
                    $(th).text(function() {
                      var string = ''
                      if(x % 2 != 0) {
                        string += hour+ ':00';
                        hour = (hour+1) % 12;
                        console.log(hour);
                        if(hour == 0) hour = 12;
                      }
                      return string ;
                    })
                  }
                  var cell = tr.appendChild(document.createElement('td'));
                  cell.className = 'tdItem';
                  $(cell).prop("id", day_letters[y] + x);
                }
              }
            }    
        </script> -->
        <!-- <table class="calendar table table-bordered">
          <thead>
              <tr>
                  <th>&nbsp;</th>
                  <th width="20%">Sunday</th>
                  <th width="20%">Monday</th>
                  <th width="20%">Tuesday</th>
                  <th width="20%">Wednesday</th>
                  <th width="20%">Thursday</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td>08:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>08:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>09:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>09:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>10:00</td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Combinatorics</span> <span class="lecturer"><a>Prof.
                                  Someone</a></span> <span class="location">23/111</span>
                      </div>
                  </td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Algebra 2</span> <span class="lecturer"><a>Prof.
                                  Else <span class="location">44/654</span>

                      </div>
                  </td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Data Structures</span> <span class="lecturer"><a>Prof.
                                  If</a></span> <span class="location">54/222</span>
                      </div>
                  </td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>10:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>11:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>11:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>12:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" has-events conflicts " rowspan="4">

                      <div class="row-fluid practice" style="width: 49.5%; height: 100%;">


                          <span class="title">Algebra 2</span> <span class="lecturer"><a>Mr.
                                  Someone</a></span> <span class="location">12/444</span>
                      </div>

                      <div class="row-fluid lecture" style="width: 49.5%; height: 100%;">


                          <span class="title">Calculus 1</span> <span class="lecturer"><a>Prof.
                                  Foo</a></span> <span class="location">66/321</span>
                      </div>
                  </td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Algebra 2</span> <span class="lecturer"><a>Prof.
                                  Oak</a></span> <span class="location">54/224</span>
                      </div>
                  </td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>12:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>13:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>13:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>14:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Data Structures</span> <span class="lecturer"><a>Prof.
                                  Oak</a></span> <span class="location">33/111</span>
                      </div>
                  </td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" has-events" rowspan="6">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Calculus 1</span> <span class="lecturer"><a>Dr.
                                  Ok</a></span> <span class="location">12/54</span>
                      </div>
                  </td>

              </tr>
              <tr>
                  <td>14:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>15:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>15:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>16:00</td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid practice" style="width: 99%; height: 100%;">


                          <span class="title">Calculus 1</span> <span class="lecturer"><a>Mrs.
                                  Ak</a></span> <span class="location">54/125</span>
                      </div>
                  </td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid lecture" style="width: 99%; height: 100%;">


                          <span class="title">Combinatorics</span> <span class="lecturer"><a>Ms.
                                  Nice</a></span> <span class="location">99/411</span>
                      </div>
                  </td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid practice" style="width: 99%; height: 100%;">


                          <span class="title">Combinatorics</span> <span class="lecturer"><a>Ms.
                                  K</a></span> <span class="location">24/900</span>
                      </div>
                  </td>

                  <td class=" has-events" rowspan="4">

                      <div class="row-fluid practice" style="width: 99%; height: 100%;">


                          <span class="title">Data Structures</span> <span class="lecturer"><a>Mr.
                                  Ben</a></span> <span class="location">54/214</span>
                      </div>
                  </td>

              </tr>
              <tr>
                  <td>16:30</td>

              </tr>
              <tr>
                  <td>17:00</td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>17:30</td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>18:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>18:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>19:00</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
              <tr>
                  <td>19:30</td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

                  <td class=" no-events" rowspan="1"></td>

              </tr>
          </tbody>
      </table> -->


<!--
        <h1>Hello, world!</h1>
        User: {{user_name}} <br>
        {% if calendar %}
            Monday events: <br>
            {% for event in calendar.daily_events['monday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Tuesday events: <br>
            {% for event in calendar.daily_events['tuesday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Wednesday events: <br>
            {% for event in calendar.daily_events['wednesday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Thursday events: <br>
            {% for event in calendar.daily_events['thursday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Friday events: <br>
            {% for event in calendar.daily_events['friday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Saturday events: <br>
            {% for event in calendar.daily_events['saturday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>

            Sunday events: <br>
            {% for event in calendar.daily_events['sunday'] %}
                Event #{{loop.index}}
                Name: {{event.event_name}} <br>
                Description: {{event.event_description}} <br>
                Location: {{event.event_location}} <br>
                Beginning time: {{event.beginning_time}} <br>
                Ending time: {{event.ending_time}} <br>
                <br><br>
            {% endfor %}
            <br>
        {% endif %}

        user name: {{user_name}} <br>
        display name: {{display_name}} <br>
        relation: {{relation}} <br>
          {% for name in feed %}
                {% if name[1]%}
                    Friend Request From:
                    Time: {{name[2]}}
                    <br><br>
                {% else %}
                    Invitee Request From: {{name[0].owner}}
                    Time: {{name[2]}}
                    <br><br>
                {% endif %}
          {% endfor %}
      </div>
    </div>
    </div>
-->


    <!--
    <table>
      <tr>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
      </tr>
      <tr>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
      </tr>
      <tr>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
        <td>HI</td>
      </tr>
    </table>-->

    <table>
      <tr>
        <th>Time</th>
        {%for ColumnHeader in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']%}
        <th>{{ColumnHeader}}</th>
        {% endfor%}
      </tr>
    {% for i in range(0,48) %}
      <tr>
        {% for day in ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday']%}
          {%if day == 'monday'%}
          <td>{{i}}</td>
          {%endif%}
          {% if calendar.event_blocks[day][i][0] != None and calendar.event_blocks[day][i][1] == False %}
            <td class="event">{{calendar.event_blocks[day][i]}}
              <a href="/profile">event</a>
            </td>
          {%else%}
            <td class="nonevent">none or recurring</td>
          {%endif%}
        {%endfor%}
      </tr>
    {%endfor%}
    </table>

    <p>hello</p>



    {% if relation == 'stranger' %}
        <form action={{friend_behavior[0]}} method="post">
          <div><input type="submit" value="Add Friend" name="user"></div>
        </form>
    {% endif %}

    {% if relation == 'cancel' %}
        <form action={{friend_behavior[0]}} method="post">
          <div><input type="submit" value="Cancel Friend Request" name="user"></div>
        </form>
    {% endif %}

    {% if relation == 'accept/cancel' %}
        <form action={{friend_behavior[0]}} method="post">
          <div><input type="submit" value="Accept Friend Request" name="user"></div>
        </form>
        <form action={{friend_behavior[1]}} method="post">
          <div><input type="submit" value="Deny Friend Request" name="user"></div>
        </form>
    {% endif %}


    <a href="/">home page</a><br>
</body>